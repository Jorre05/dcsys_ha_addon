#!/usr/bin/with-contenv bashio
# ==============================================================================
# Start the example service
# s6-overlay docs: https://github.com/just-containers/s6-overlay
# ==============================================================================

# Add your code here

# Declare variables
declare message
declare ha_hostname

## Get the 'message' key from the user config options.
message=$(bashio::config 'message')
message=$(bashio::config 'ha_hostname')

## Print the message the user supplied, defaults to "Hello World..."
bashio::log.info "${message:="DCSys World..."}"
bashio::log.info "${ha_hostname:="dcsys.struyve.lan"}"

## Run your program
#exec /usr/bin/my_program
exec /usr/bin/my_program
export DCSYSROOT=/etc/dcsys
exec $DCSYSROOT/bin/dcsysmodbusd -h 10.0.0.22 -s 1 -l /share/dcsysmodbusd.log
exec $DCSYSROOT/bin/dcsysfluviusd -h 10.0.0.23 -l /share/dcsysfluviusd.log
exec $DCSYSROOT/bin/dcsysbalanced -s 3 -l /share/dcsysbalanced.log
exec /usr/bin/my_program